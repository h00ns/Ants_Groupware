"use strict";(self["webpackChunkrtc_frontend"]=self["webpackChunkrtc_frontend"]||[]).push([[562],{3562:(t,e,o)=>{o.r(e),o.d(e,{default:()=>B});var a=o(3673),s=o(2323);const l=(0,a.HX)("data-v-27e92561");(0,a.dD)("data-v-27e92561");const n={id:"myData"},r={class:"q-pa-md"},i={class:"section"},h={class:"subtitle txt"},c={key:0,class:"other"},d={key:5},g={key:0,class:"work"},u={key:1,class:"work"},k={class:"subDay shadow-1"},m=(0,a.Wm)("div",{class:"title"},"Team Log",-1),w={style:{width:"300px"}},y={key:0,class:"vl"},p={key:1,class:"v2"},f={key:2,class:"v3"},v={class:"user"},j={key:0},W=(0,a.Wm)("span",{class:"board-write"},"게시글",-1),q=(0,a.Uk)("을 작성했습니다."),D={key:1},b=(0,a.Wm)("span",{class:"file-upload"},"파일",-1),x=(0,a.Uk)("을 업로드 했습니다."),z={key:2},L=(0,a.Wm)("span",{class:"todo-write"},"일정",-1),C=(0,a.Uk)("을 등록했습니다."),M={class:"logTitle"},S={class:"time"},U={key:0,class:"empty"};(0,a.Cn)();const T=l(((t,e,o,T,Y,_)=>{const I=(0,a.up)("q-btn"),H=(0,a.up)("q-markup-table"),N=(0,a.up)("q-item-label"),F=(0,a.up)("q-scroll-area");return(0,a.wg)(),(0,a.j4)("div",n,[(0,a.Wm)("div",r,[(0,a.Wm)("div",i,[(0,a.Wm)("div",h,[(0,a.Wm)(I,{flat:"",round:"",color:"white","text-color":"black",label:"<",onClick:e[1]||(e[1]=t=>_.calendarData(-1))}),(0,a.Uk)(" "+(0,s.zw)(Y.year)+"년 "+(0,s.zw)(Y.month)+"월 ",1),(0,a.Wm)(I,{flat:"",round:"",color:"white","text-color":"black",label:">",onClick:e[2]||(e[2]=t=>_.calendarData(1))})]),(0,a.Wm)(H,{separator:"cell",flat:"",bordered:"",class:" has-text-centered calendar"},{default:l((()=>[(0,a.Wm)("thead",null,[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(Y.days,(t=>((0,a.wg)(),(0,a.j4)("th",{key:t,style:{"background-color":"#249752","font-size":"15px"}},(0,s.zw)(t),1)))),128))]),(0,a.Wm)("tbody",null,[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(Y.dates,((t,e)=>((0,a.wg)(),(0,a.j4)("tr",{key:e},[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(t,((t,o)=>((0,a.wg)(),(0,a.j4)("td",{key:o,class:"q-td--no-hover",style:{height:"130px",width:"80px"}},[e>3&&t<6||e<2&&t>25?((0,a.wg)(),(0,a.j4)("span",c,(0,s.zw)(t),1)):0===o?((0,a.wg)(),(0,a.j4)("span",{key:1,id:"day",style:{color:"red",cursor:"pointer"},onClick:e=>T.requestLog(Y.year,Y.month,t)},(0,s.zw)(t),9,["onClick"])):6===o?((0,a.wg)(),(0,a.j4)("span",{key:2,id:"day",style:{color:"blue",cursor:"pointer"},onClick:e=>T.requestLog(Y.year,Y.month,t)},(0,s.zw)(t),9,["onClick"])):Y.today===t&&Y.month===Y.currentMonth?((0,a.wg)(),(0,a.j4)("span",{key:3,id:"day",class:"today",onClick:e=>T.requestLog(Y.year,Y.month,t)},(0,s.zw)(t)+" Today",9,["onClick"])):((0,a.wg)(),(0,a.j4)("span",{key:4,id:"day",style:{cursor:"pointer"},onClick:e=>T.requestLog(Y.year,Y.month,t)},(0,s.zw)(t),9,["onClick"])),!(e>3&&t<6)||e<2&&t>25?((0,a.wg)(),(0,a.j4)("div",d,[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(Y.monthwork,((e,o)=>((0,a.wg)(),(0,a.j4)("div",{key:o},[o===t?((0,a.wg)(),(0,a.j4)("div",g,(0,s.zw)(e[0]),1)):(0,a.kq)("",!0),o===t?((0,a.wg)(),(0,a.j4)("div",u,(0,s.zw)(e[1]),1)):(0,a.kq)("",!0)])))),128))])):(0,a.kq)("",!0)])))),128))])))),128))])])),_:1})])]),(0,a.Wm)("div",k,[m,(0,a.Wm)(F,{style:{height:"600px","max-width":"300px"}},{default:l((()=>[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(T.dayLog,((t,e)=>((0,a.wg)(),(0,a.j4)("div",{key:e},[(0,a.Wm)("ul",w,["todo-write"===t.type?((0,a.wg)(),(0,a.j4)("div",y)):(0,a.kq)("",!0),"board-write"===t.type?((0,a.wg)(),(0,a.j4)("div",p)):(0,a.kq)("",!0),"file-upload"===t.type?((0,a.wg)(),(0,a.j4)("div",f)):(0,a.kq)("",!0),(0,a.Wm)("div",v,[(0,a.Wm)("img",{src:t.profileLocation,style:{width:"30px",height:"30px","margin-right":"8px","border-radius":"20px"}},null,8,["src"]),t.writer?((0,a.wg)(),(0,a.j4)("span",j,[(0,a.Uk)((0,s.zw)(t.userName)+"님이 ",1),W,q])):(0,a.kq)("",!0),t.uploader?((0,a.wg)(),(0,a.j4)("span",D,[(0,a.Uk)((0,s.zw)(t.userName)+"님이 ",1),b,x])):(0,a.kq)("",!0),t.userId?((0,a.wg)(),(0,a.j4)("span",z,[(0,a.Uk)((0,s.zw)(t.userName)+"님이 ",1),L,C])):(0,a.kq)("",!0)]),(0,a.Wm)("div",M,[t.title?((0,a.wg)(),(0,a.j4)(N,{key:0},{default:l((()=>[(0,a.Uk)((0,s.zw)(t.title),1)])),_:2},1024)):(0,a.kq)("",!0),t.fileName?((0,a.wg)(),(0,a.j4)(N,{key:1},{default:l((()=>[(0,a.Uk)((0,s.zw)(t.fileName),1)])),_:2},1024)):(0,a.kq)("",!0)]),(0,a.Wm)("div",S,[(0,a.Wm)(N,{caption:""},{default:l((()=>[(0,a.Uk)((0,s.zw)(t.time),1)])),_:2},1024)])])])))),128)),0===T.dayLog.length?((0,a.wg)(),(0,a.j4)("div",U," 공유된 기록이 없습니다. ")):(0,a.kq)("",!0)])),_:1})])])}));o(71),o(7280);var Y=o(52),_=o.n(Y),I=o(7874);const H={name:"management",data(){return{days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dates:[],currentYear:0,currentMonth:0,year:0,month:0,lastMonthStart:0,nextMonthStart:0,today:0,monthwork:[],worklog:[]}},created(){const t=new Date;this.currentYear=t.getFullYear(),this.currentMonth=t.getMonth()+1,this.year=this.currentYear,this.month=this.currentMonth,this.today=t.getDate(),this.calendarData(this.month),this.getWork(this.year,this.month)},methods:{calendarData(t){t<0?this.month-=1:1===t&&(this.month+=1),0===this.month?(this.year-=1,this.month=12):this.month>12&&(this.year+=1,this.month=1);const[e,o,a]=this.getFirstDayLastDate(this.year,this.month);this.dates=this.getMonthOfDays(e,o,a),this.getWork(this.year,this.month)},getFirstDayLastDate(t,e){const o=new Date(t,e-1,1).getDay(),a=new Date(t,e,0).getDate();let s=t,l=e-1;1===e&&(l=12,s-=1);const n=new Date(s,l,0).getDate();return[o,a,n]},getMonthOfDays(t,e,o){let a=1,s=o-t+1;const l=[];let n=[];while(a<=e){if(1===a)for(let e=0;e<t;e+=1)0===e&&(this.lastMonthStart=s),n.push(s),s+=1;n.push(a),7===n.length&&(l.push(n),n=[]),a+=1}const r=n.length;if(r>0&&r<7)for(let i=1;i<=7-r;i+=1)n.push(i);return n.length>0&&l.push(n),this.nextMonthStart=n[0],console.log(l),l},getWork(t,e){1===String(e).length&&(e="0"+String(e));const o="https://localhost:8443/",a=localStorage.getItem("id"),s={method:"get",url:o+"api/v1/users/"+a+"/attendance/"+t+"/"+e};_()(s).then((t=>{this.worklog=t.data,this.monthwork=[];for(let e=0;e<32;e++)this.monthwork.push("");for(let e=0;e<this.worklog.length;e++){const t=this.worklog[e].date,o=this.worklog[e].checkInTime,a=this.worklog[e].checkOutTime,s=t.split("-")[2];this.monthwork[Number(s)]=[o,a]}})).catch((function(t){console.log(t)}))}},setup(){const t=(0,a.Fl)((()=>e.getters["module/getDayLog"])),e=(0,I.oR)(),o=function(t,o,a){console.log(t,o,a,"누른 날짜");const s=localStorage.getItem("departmentId");e.dispatch("module/getAlllog",{year:t,month:o,day:a,departmentId:s}).then((function(t){const o=[];console.log(t),console.log(t.data,"달력에서 로그요청보냄");for(let e=0;e<t.data.length;e++)o.push(t.data[e]);console.log(o,"데이로그"),e.commit("module/setDayLog",o)}))};return{requestLog:o,dayLog:t}}};var N=o(2165),F=o(481),K=o(3884),Q=o(8446),Z=o(2350),O=o(7518),A=o.n(O);H.render=T,H.__scopeId="data-v-27e92561";const B=H;A()(H,"components",{QBtn:N.Z,QMarkupTable:F.Z,QTd:K.Z,QScrollArea:Q.Z,QItemLabel:Z.Z})}}]);