"use strict";(self["webpackChunkrtc_frontend"]=self["webpackChunkrtc_frontend"]||[]).push([[639],{7639:(t,n,o)=>{o.r(n),o.d(n,{default:()=>U});o(71);var e=o(3673),l=o(2323);const a=(0,e.HX)("data-v-12cef99a");(0,e.dD)("data-v-12cef99a");const i={id:"myData"},s=(0,e.Wm)("div",{style:{"margin-top":"25px","margin-left":"200px","font-weight":"bold","font-size":"25px"}},[(0,e.Wm)("p",null,"개인 정보 수정")],-1),c={class:"all shadow-2"},m={class:"mypage"},d=(0,e.Wm)("td",{class:"left"},"이미지",-1),f=(0,e.Uk)("이미지 변경"),r=(0,e.Wm)("td",{class:"left"},"이름",-1),u=(0,e.Wm)("td",{class:"left"},"아이디",-1),p=(0,e.Wm)("td",{class:"left"},"이메일",-1),g=(0,e.Wm)("td",{class:"left"},"휴가",-1),h=(0,e.Wm)("td",{class:"left"},"부서",-1),W=(0,e.Wm)("td",{class:"left"},"직책",-1),y={class:"submitbtn"},v=(0,e.Wm)("div",{class:"row"},null,-1),I={class:"row"},C=(0,e.Wm)("div",{class:"col-2"},null,-1),x={class:"col-3"},L=(0,e.Wm)("span",null,"회원 탈퇴",-1),N={class:"col-4"},O=(0,e.Wm)("span",null,"정보 수정",-1),E=(0,e.Wm)("div",{class:"col-2"},null,-1);(0,e.Cn)();const b=a(((t,n,o,b,z,T)=>{const w=(0,e.up)("q-btn"),k=(0,e.up)("q-input"),B=(0,e.up)("q-icon");return(0,e.wg)(),(0,e.j4)("div",i,[s,(0,e.Wm)("div",c,[(0,e.Wm)("table",m,[(0,e.Wm)("tr",null,[d,(0,e.Wm)("td",null,[(0,e.Wm)("div",null,[(0,e.Wm)("img",{src:t.userInfomation.profileLocation,style:{"margin-top":"50px",width:"220px",height:"270px","border-radius":"10px"}},null,8,["src"]),(0,e.Wm)(w,{onClick:t.imgLabelClick,class:"imgbtn"},{default:a((()=>[f])),_:1},8,["onClick"]),(0,e.Wm)("input",{ref:"imageInput",type:"file",style:{display:"none",opacity:"0"},onChange:n[1]||(n[1]=(...n)=>t.onChangeImages&&t.onChangeImages(...n)),accept:".jpg, .jpeg, .png, .gif",id:"profile_img_upload"},null,544)])])]),(0,e.Wm)("tr",null,[r,(0,e.Wm)("td",null,(0,l.zw)(t.userInfomation.name),1)]),(0,e.Wm)("tr",null,[u,(0,e.Wm)("td",null,(0,l.zw)(t.userInfomation.userId),1)]),(0,e.Wm)("tr",null,[p,(0,e.Wm)("td",null,[(0,e.Wm)(k,{color:"teal",square:"",outlined:"",modelValue:t.userInfomation.email,"onUpdate:modelValue":n[2]||(n[2]=n=>t.userInfomation.email=n),style:{width:"400px"}},null,8,["modelValue"])])]),(0,e.Wm)("tr",null,[g,(0,e.Wm)("td",null,(0,l.zw)(t.userInfomation.holiday),1)]),(0,e.Wm)("tr",null,[h,(0,e.Wm)("td",null,(0,l.zw)(t.userInfomation.department),1)]),(0,e.Wm)("tr",null,[W,(0,e.Wm)("td",null,(0,l.zw)(t.userInfomation.position),1)])]),(0,e.Wm)("div",y,[v,(0,e.Wm)("div",I,[C,(0,e.Wm)("div",x,[(0,e.Wm)("div",{onClick:n[3]||(n[3]=(...n)=>t.remove&&t.remove(...n)),class:"btn"},[(0,e.Wm)(B,{class:"icon",name:"delete"}),L])]),(0,e.Wm)("div",N,[(0,e.Wm)("div",{onClick:n[4]||(n[4]=(...n)=>t.myEdit&&t.myEdit(...n)),class:"btn"},[(0,e.Wm)(B,{class:"icon",name:"build"}),O])]),E])])])])}));o(7965);var z=o(7874),T=o(9582);const w=(0,e.aZ)({name:"mypage",setup(){const t=(0,T.tv)(),n=(0,z.oR)(),l=o(1770),a=(0,e.Fl)((()=>n.getters["module/getUserInfo"])),i={userId:"",name:"",department:"",profileLocation:"",email:"",holiday:"",position:""};function s(){this.$refs.imageInput.click()}function c(t){console.log(t.target.files),console.log(t.target);const n=t.target.files[0];this.userInfomation.profileLocation=URL.createObjectURL(n),this.userInfomation.image=n}function m(){const t=document.getElementById("profile_img_upload");console.log(t),t.click()}function d(){const t=new FormData;t.append("email",a.value.email),t.append("profile",a.value.image),console.log(a.value.image,"사진변경?"),void 0!==a.value.image?n.dispatch("module/editInfo",t).then((function(t){console.log(t),l.fire({title:'<span style="font-family:NEXON Lv1 Gothic OTF; font-size:16px;">회원정보가 성공적으로 수정되었습니다.</span>',confirmButtonColor:"#18C75E",confirmButtonText:'<span style="font-family:NEXON Lv1 Gothic OTF; font-size:14px;">확인</span>'}).then((function(){n.dispatch("module/requestInfo").then((function(t){console.log(t.data);const o={userId:t.data.userId,name:t.data.name,department:t.data.department,profileLocation:t.data.profileLocation,email:t.data.email,holiday:t.data.holiday,position:t.data.position};console.log(o),n.commit("module/setUserInfo",o)})).catch((function(t){console.log(t)}))}))})).catch((function(t){console.log(t),alert(t)})):l.fire({title:'<span style="font-family:NEXON Lv1 Gothic OTF; font-size:16px;">프로필 사진을 변경해주세요.</span>',confirmButtonColor:"#18C75E",confirmButtonText:'<span style="font-family:NEXON Lv1 Gothic OTF; font-size:14px;">확인</span>'})}(0,e.bv)((()=>{console.log(n.getters["module/getLoginUser"],"로그인한 유저"),n.dispatch("module/requestInfo").then((function(t){console.log(t.data,"result"),i.userId=t.data.userId,i.name=t.data.name,i.department=t.data.department,i.profileLocation=t.data.profileLocation,i.email=t.data.email,i.holiday=t.data.holiday,i.position=t.data.position,n.dispatch("module/departmentInfo").then((function(t){for(let n=0;n<t.data.length;n++)if(i.department===t.data[n].id){i.department=t.data[n].departmentName;break}n.commit("module/setUserInfo",i)})).catch((function(t){console.log(t,"부서 에러")}))})).catch((function(t){console.log(t)}))}));const f=function(){l.fire({title:'<span style="font-family:NEXON Lv1 Gothic OTF; font-size:16px;">정말 탈퇴 하시겠습니까?</span>',showCancelButton:!0,confirmButtonColor:"#ce1919",cancelButtonColor:"#18C75E",cancelButtonText:'<span style="font-family:NEXON Lv1 Gothic OTF; font-size:14px;">취소</span>',confirmButtonText:'<span style="font-family:NEXON Lv1 Gothic OTF; font-size:14px;">탈퇴</span>'}).then((o=>{o.isConfirmed&&n.dispatch("module/deleteUser").then((function(n){console.log(n),l.fire({title:'<span style="font-family:NEXON Lv1 Gothic OTF; font-size:16px;">성공적으로 탈퇴되었습니다.</span>',confirmButtonColor:"#18C75E",confirmButtonText:'<span style="font-family:NEXON Lv1 Gothic OTF; font-size:14px;">확인</span>'}).then((function(){t.push("/")}))})).catch((function(t){console.log(t),l.fire({title:'<span style="font-family:NEXON Lv1 Gothic OTF; font-size:16px;">회원탈퇴에 실패했습니다.</span>',confirmButtonColor:"#ce1919",confirmButtonText:'<span style="font-family:NEXON Lv1 Gothic OTF; font-size:14px;">확인</span>'})}))}))};return{userInfomation:a,remove:f,myEdit:d,onClickImageUpload:s,onChangeImages:c,imgLabelClick:m}}});var k=o(2165),B=o(4842),F=o(4554),X=o(7518),G=o.n(X);w.render=b,w.__scopeId="data-v-12cef99a";const U=w;G()(w,"components",{QBtn:k.Z,QInput:B.Z,QIcon:F.Z})}}]);